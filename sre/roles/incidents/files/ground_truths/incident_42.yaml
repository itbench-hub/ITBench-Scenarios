---
metadata:
  version: "v1"
fault:
  - entity:
      name: high-priority-pods
      group_id: high-priority-pods
      kind: Pod
    condition: High-priority pods deployed causing eviction of lower-priority payment pods
    category: Resource
    fault_mechanism: pod-priority-eviction
alerts:
  - id: NoRequestsDetected
    group_id: payment-service-1
    metadata:
      description: Payment service receiving no requests after pod eviction
  - id: RequestErrorRate
    group_id: checkout-service-1
    metadata:
      description: Checkout service experiencing connection failures to payment
  - id: RequestErrorRate
    group_id: frontend-service-1
    metadata:
      description: Frontend service errors due to payment unavailability
  - id: PendingPodsDetected
    group_id: payment-pod-1
    metadata:
      description: Payment pods stuck in Pending state after eviction
groups:
  - id: high-priority-pods
    kind: Pod
    filter:
      - eviction-pod-.*
    namespace: otel-demo
    root_cause: true
  - id: payment-service-1
    kind: Service
    filter:
      - payment\b
    namespace: otel-demo
  - id: payment-pod-1
    kind: Pod
    filter:
      - payment-.*
    namespace: otel-demo
  - id: checkout-service-1
    kind: Service
    filter:
      - checkout\b
    namespace: otel-demo
  - id: checkout-pod-1
    kind: Pod
    filter:
      - checkout-.*
    namespace: otel-demo
  - id: frontend-service-1
    kind: Service
    filter:
      - frontend\b
    namespace: otel-demo
  - id: frontend-pod-1
    kind: Pod
    filter:
      - frontend-.*
    namespace: otel-demo
aliases:
  - - payment-service-1
    - payment-pod-1
  - - checkout-service-1
    - checkout-pod-1
  - - frontend-service-1
    - frontend-pod-1
propagations:
  - source: high-priority-pods
    target: payment-pod-1
    condition: High-priority pods consume resources causing payment pod eviction
    effect: Payment pods evicted and unable to reschedule
  - source: payment-pod-1
    target: payment-service-1
    condition: Payment pods evicted leaving service with no backends
    effect: Payment service becomes unavailable
  - source: payment-service-1
    target: checkout-service-1
    condition: Checkout service cannot reach payment service
    effect: Checkout operations fail with connection errors
  - source: payment-service-1
    target: frontend-service-1
    condition: Frontend cannot process payments
    effect: Frontend displays payment errors to users
recommended_actions:
  - solution:
      id: remove_high_priority_pods
      actions:
        - Delete high-priority eviction pods to free resources
        - Verify payment pods reschedule successfully
        - Implement ResourceQuotas to prevent priority abuse
