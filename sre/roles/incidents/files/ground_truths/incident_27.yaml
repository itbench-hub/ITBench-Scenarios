---
fault:
  - entity:
      name: http-abort-otel-demo-quoteservice-1
      group_id: http-abort-otel-demo-quoteservice-1
      kind: HttpChaos
    condition: HTTP Chaos fault aborting POST requests to quote service /getquote endpoint
    category: Chaos
    fault_mechanism: chaos
alerts:
  - id: RequestErrorRate
    group_id: frontend-proxy-service-1
    metadata:
      description: Error rate is above threshold for frontend-proxy service
  - id: RequestErrorRate
    group_id: frontend-service-1
    metadata:
      description: Error rate is above threshold for frontend service
  - id: RequestErrorRate
    group_id: checkout-service-1
    metadata:
      description: Error rate is above threshold for checkout service
  - id: RequestErrorRate
    group_id: shipping-service-1
    metadata:
      description: Error rate is above threshold for shipping service
groups:
  - id: http-abort-otel-demo-quoteservice-1
    kind: HttpChaos
    filter:
      - http-abort-otel-demo-quoteservice-1
    namespace: chaos-mesh
    root_cause: true
  - id: quote-service-1
    kind: Service
    filter:
      - quote\b
    namespace: otel-demo
  - id: quote-pod-1
    kind: Pod
    filter:
      - quote-.*
    namespace: otel-demo
  - id: checkout-service-1
    kind: Service
    filter:
      - checkout\b
    namespace: otel-demo
  - id: checkout-pod-1
    kind: Pod
    filter:
      - checkout-.*
    namespace: otel-demo
  - id: shipping-service-1
    kind: Service
    filter:
      - shipping\b
    namespace: otel-demo
  - id: shipping-pod-1
    kind: Pod
    filter:
      - shipping-.*
    namespace: otel-demo
  - id: frontend-service-1
    kind: Service
    filter:
      - frontend\b
    namespace: otel-demo
  - id: frontend-pod-1
    kind: Pod
    filter:
      - frontend-.*
    namespace: otel-demo
  - id: frontend-proxy-service-1
    kind: Service
    filter:
      - frontend-proxy\b
    namespace: otel-demo
  - id: frontend-proxy-pod-1
    kind: Pod
    filter:
      - frontend-proxy-.*
    namespace: otel-demo
aliases:
  - - quote-service-1
    - quote-pod-1
  - - checkout-service-1
    - checkout-pod-1
  - - shipping-service-1
    - shipping-pod-1
  - - frontend-service-1
    - frontend-pod-1
  - - frontend-proxy-service-1
    - frontend-proxy-pod-1
propagations:
  - source: http-abort-otel-demo-quoteservice-1
    target: quote-service-1
    condition: HTTP Chaos aborts all POST requests to quote service /getquote endpoint
    effect: Quote service becomes unavailable for shipping quote requests
  - source: quote-service-1
    target: shipping-service-1
    condition: Shipping service cannot get quotes due to quote service failures
    effect: Shipping service experiences errors when calling quote service
  - source: shipping-service-1
    target: checkout-service-1
    condition: Checkout service receives errors from shipping service due to quote failures
    effect: Checkout service experiences errors during shipping calculations
  - source: checkout-service-1
    target: frontend-service-1
    condition: Frontend receives errors from checkout service due to shipping/quote failures
    effect: Frontend service experiences errors during checkout process
  - source: frontend-service-1
    target: frontend-proxy-service-1
    condition: Frontend-proxy receives errors from frontend service due to checkout failures
    effect: Frontend-proxy service experiences errors when proxying requests
recommended_actions:
  - solution:
      id: remove_chaos_experiment
      actions:
        - Delete the HTTP Chaos resource targeting quote service
