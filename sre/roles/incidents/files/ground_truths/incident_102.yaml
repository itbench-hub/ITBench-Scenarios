---
fault:
  - entity:
      name: otel-demo-namespace-1
      group_id: otel-demo-namespace-1
      kind: Namespace
    condition: Memory quota imposed on namespace preventing pod scheduling
    category: custom
    fault_mechanism: resource_quota_enforcement
alerts:
  - id: NoRequestsDetected
    group_id: ad-service-1
    metadata:
      description: Service ad in namespace otel-demo has 0 requests
  - id: RequestErrorRate
    group_id: frontend-service-1
    metadata:
      description: Request error rate in service frontend in namespace otel-demo is above 0
  - id: RequestErrorRate
    group_id: frontend-proxy-service-1
    metadata:
      description: Request error rate in service frontend-proxy in namespace otel-demo is above 0
groups:
  - id: otel-demo-namespace-1
    kind: Namespace
    filter:
      - otel-demo
    root_cause: true
  - id: ad-pod-1
    kind: Pod
    filter:
      - ad-.*
    namespace: otel-demo
  - id: ad-service-1
    kind: Service
    filter:
      - ad\b
    namespace: otel-demo
  - id: ad-deployment-1
    kind: Deployment
    filter:
      - ad\b
    namespace: otel-demo
  - id: ad-replicaset-1
    kind: ReplicaSet
    filter:
      - ad-.*
    namespace: otel-demo
  - id: frontend-service-1
    kind: Service
    filter:
      - frontend\b
    namespace: otel-demo
  - id: frontend-pod-1
    kind: Pod
    filter:
      - frontend-.*
    namespace: otel-demo
  - id: frontend-proxy-service-1
    kind: Service
    filter:
      - frontend-proxy\b
    namespace: otel-demo
  - id: frontend-proxy-pod-1
    kind: Pod
    filter:
      - frontend-proxy-.*
    namespace: otel-demo
  - id: flagd-service-1
    kind: Service
    filter:
      - flagd\b
    namespace: otel-demo
  - id: flagd-pod-1
    kind: Pod
    filter:
      - flagd-.*
    namespace: otel-demo
aliases:
  - - ad-service-1
    - ad-pod-1
    - ad-deployment-1
    - ad-replicaset-1
  - - frontend-service-1
    - frontend-pod-1
  - - frontend-proxy-service-1
    - frontend-proxy-pod-1
propagations:
  - source: otel-demo-namespace-1
    target: ad-deployment-1
    condition: Memory quota prevents new pod scheduling when deployment tries to scale up
    effect: Ad deployment unable to create new pods despite scale-up command
  - source: ad-deployment-1
    target: ad-replicaset-1
    condition: Deployment cannot create new ReplicaSet due to namespace memory constraints
    effect: Ad ReplicaSet shows 0/1 replicas created with FailedCreate condition
  - source: ad-replicaset-1
    target: ad-pod-1
    condition: ReplicaSet cannot schedule pods due to memory quota enforcement
    effect: Ad pods cannot be created, resulting in MinimumReplicasUnavailable
  - source: ad-pod-1
    target: ad-service-1
    condition: No healthy pods available to serve requests
    effect: Ad service becomes unavailable and receives no requests
  - source: ad-service-1
    target: frontend-service-1
    condition: Frontend cannot retrieve ads via gRPC call to ad service
    effect: Frontend service experiences request errors
  - source: frontend-service-1
    target: frontend-proxy-service-1
    condition: Frontend errors propagate to frontend-proxy due to service dependencies
    effect: Frontend-proxy service experiences request errors
recommended_actions:
  - solution:
      id: increase_memory_quota
      actions:
        - Evaluate current namespace memory usage and requirements
        - Increase memory quota on otel-demo namespace to accommodate all services
