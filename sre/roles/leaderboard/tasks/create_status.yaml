---
- name: Create leaderboard status content
  ansible.builtin.set_fact:
    leaderboard_current_status:
      incident: "{{ leaderboard_incident.id | default(omit) }}"
      events: []
    leaderboard_legacy_status:
      status:
        conditions: []

- name: Create status file in legacy format
  ansible.builtin.copy:
    content: "{{ leaderboard_legacy_status | to_nice_json(indent=2) }}"
    dest: "/tmp/assertion.json"
    mode: "0644"

- name: Create status file in v1 format
  ansible.builtin.copy:
    content: "{{ leaderboard_current_status | to_nice_json }}"
    dest: "/tmp/status.json"
    mode: "0644"
