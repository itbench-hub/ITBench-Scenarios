---
- name: Include invalid command injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_invalid_command.yaml
  vars:
    spec: "{{ fault.custom.invalid_command }}"
  when:
    - fault.custom.name == 'invalid-command'
    - fault.custom.invalid_command is defined

- name: Include invalid node selector injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_invalid_node_selector.yaml
  vars:
    spec: "{{ fault.custom.invalid_node_selector }}"
  when:
    - fault.custom.name == 'invalid-node-selector'
    - fault.custom.invalid_node_selector is defined

- name: Include misconfigured horizontal pod autoscaler injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_misconfigured_horizontal_pod_autoscaler.yaml
  vars:
    spec: "{{ fault.custom.misconfigured_horizontal_pod_autoscaler }}"
  when:
    - fault.custom.name == 'misconfigured-horizontal-pod-autoscaler'
    - fault.custom.misconfigured_horizontal_pod_autoscaler is defined

- name: Include misconfigured network policy injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_misconfigured_network_policy.yaml
  vars:
    spec: "{{ fault.custom.misconfigured_network_policy }}"
  when:
    - fault.custom.name == 'misconfigured-network-policy'
    - fault.custom.misconfigured_network_policy is defined

- name: Include misconfigured persistent volume claim injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_misconfigured_persistent_volume_claim.yaml
  vars:
    spec: "{{ fault.custom.misconfigured_persitent_volume_claim }}"
  when:
    - fault.custom.name == 'misconfigured-persitent-volume-claim'
    - fault.custom.misconfigured_persitent_volume_claim is defined

- name: Include misconfigured resource quota injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_misconfigured_resource_quota.yaml
  vars:
    spec: "{{ fault.custom.misconfigured_resource_quota }}"
  when:
    - fault.custom.name == 'misconfigured-resource-quota'
    - fault.custom.misconfigured_resource_quota is defined

- name: Include misconfigured service port injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_misconfigured_service_port.yaml
  vars:
    spec: "{{ fault.custom.misconfigured_service_port }}"
  when:
    - fault.custom.name == 'misconfigured-service-port'
    - fault.custom.misconfigured_service_port is defined

- name: Include unsupported image injection tasks
  ansible.builtin.include_tasks:
    file: inject_custom_unsupported_image.yaml
  vars:
    spec: "{{ fault.custom.unsupported_image }}"
  when:
    - fault.custom.name == 'unsupported-image'
    - fault.custom.unsupported_image is defined
