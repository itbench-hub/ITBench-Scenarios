---
- name: Import custom fault injection tasks
  ansible.builtin.import_tasks:
    file: inject_custom.yaml
  when:
    - fault.custom is defined

- name: Import Chaos Mesh fault injection tasks
  ansible.builtin.import_tasks:
    file: inject_chaos_mesh.yaml
  vars:
    experiments: "{{ fault.chaos_mesh.experiments }}"
  when:
    - fault.chaos_mesh is defined
    - fault.chaos_mesh.experiments | length > 0

- name: Import Otel Demo fault injection tasks
  ansible.builtin.import_tasks:
    file: inject_otel_demo.yaml
  when:
    - fault.otel_demo is defined

# TODO: Remove when refactoring e2e

# - name: Import fault injection time tasks
#   ansible.builtin.import_tasks:
#     file: register_fault_injection_time.yaml
#   when:
#     - false
