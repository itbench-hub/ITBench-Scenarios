---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: {{ route.name }}
  namespace: {{ route.namespace }}
spec:
  parentRefs:
    - name: {{ gateway.name }}
  rules:
    - filters:
        - type: ResponseHeaderModifier
          responseHeaderModifier:
            add:
              - name: Content-Security-Policy
                value: "img-src 'self' data:; connect-src 'self'; font-src 'self'; object-src 'none'; form-action 'none'; frame-ancestors 'none'"
              - name: Cross-Origin-Resource-Policy
                value: same-origin
              - name: Strict-Transport-Security
                value: max-age=31536000; includeSubDomains; preload
              - name: Referrer-Policy
                value: strict-origin-when-cross-origin
              - name: X-Content-Type-Options
                value: nosniff
              - name: X-Frame-Options
                value: DENY
              - name: X-XSS-Protection
                value: "0"
      backendRefs:
        - name: {{ route.service.name }}
          port: {{ route.service.port }}
