---
- name: Create the namespace
  kubernetes.core.k8s:
    kubeconfig: "{{ recorders_cluster.kubeconfig }}"
    resource_definition:
      apiVersion: v1
      kind: Namespace
      metadata:
        name: "{{ recorders_namespace.name }}"
    state: present

- name: Import alert recorder installation tasks
  ansible.builtin.import_tasks:
    file: install_alerts_recorders.yaml
  when:
    - recorders_required.alerts is defined

- name: Import topology recorder installation tasks
  ansible.builtin.import_tasks:
    file: install_topology_recorders.yaml
  when:
    - recorders_required.topology is defined

- name: Import traces recorder installation tasks
  ansible.builtin.import_tasks:
    file: install_traces_recorders.yaml
  when:
    - recorders_required.traces is defined
