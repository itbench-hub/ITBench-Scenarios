This file is autogenerated. Please do not edit.

# ITBench: SRE and FinOps Scenarios

ITBench contains several scenarios for benchmarking real world based scenarios for Site Reliability Engineers and Finacial Operations personal.

The following scenarios are being open-sourced at this time and their implementation can be found [here](../roles/faults):

| ID | Category | Complexity | Platforms | Tags |
| --- | --- | --- | --- | --- |
| [3](#Scenario-3) | sre | medium | Kubernetes | Deployment, Performance |
| [20](#Scenario-20) | sre | low | Kubernetes | Deployment, Performance |
| [41](#Scenario-41) | sre | low | Kubernetes | Deployment, Performance |

## Detailed Summary of Scenarios

### Scenario 3

**Description:** This scenario simulates the OpenTelemetry Demo's `ad` service experiencing high CPU usage.

**Active Applications:**

- [OpenTelemetry Demo (Astronomy Shop)](./applications.md#opentelemetry-demo-astronomy-shop)

**Faults Injected:**

- [OpenTelemetry Demo Feature Flag](./faults.md#OpenTelemetry-Demo-Feature-Flag)

**Solution:**

- Disable the feature flag (adHighCpu) by manually editing the contents of the ConfigMap

```shell
kubectl -n otel-demo edit configmap flagd-config
```

- Restart all of the Deployment workloads.

```shell
kubectl -n otel-demo rollout restart deployment
```

### Scenario 20

**Description:** This scenario simulates the OpenTelemetry Demo's `product-catalog` service using the wrong image.

**Active Applications:**

- [OpenTelemetry Demo (Astronomy Shop)](./applications.md#opentelemetry-demo-astronomy-shop)

**Faults Injected:**

- [Nonexistent Kubernetes Workload Container Image](./faults.md#Nonexistent-Kubernetes-Workload-Container-Image)

**Solution:**

- Revert the last change done to the manifest.

```shell
kubectl -n otel-demo rollout undo deployment/product-catalog
```

OR

- Manually edit the manifest and replace the invalid image with the correct value.

```shell
kubectl -n otel-demo edit deployment product-catalog
```

### Scenario 41

**Description:** This scenario simulates the OpenTelemetry Demo's `cart` service consuming most of the node's available memory.

**Active Applications:**

- [OpenTelemetry Demo (Astronomy Shop)](./applications.md#opentelemetry-demo-astronomy-shop)

**Faults Injected:**

- [Unassigned Kubernetes Workload Container Resource Limits](./faults.md#Unassigned-Kubernetes-Workload-Container-Resource-Limits)
- [Scheduled Chaos Mesh Experiment](./faults.md#Scheduled-Chaos-Mesh-Experiment)

**Solution:**

- Annotate the schedule to pause the active experiment.

```shell
kubectl -n chaos-mesh annotate schedule cart-stress-chaos-memory experiment.chaos-mesh.org/pause='true'
```

- Retrieve the associated experiment managed by the schedule.

```shell
kubectl -n chaos-mesh get stresschaos --selector='experiment.chaos-mesh.org/pause=true'
```

- Delete the retrieved experiement after it has entered the `Paused` state.


- Delete the schedule.

```shell
kubectl -n chaos-mesh delete schedule cart-stress-chaos-memory experiment.chaos-mesh.org/pause='true'
```

- Revert the last change done to the manifest.

```shell
kubectl -n otel-demo rollout undo deployment/cart
```

OR

- Manually edit the manifest and replace the invalid container's resource configuration with the correct value(s).

```shell
kubectl -n otel-demo edit deployment cart
```
