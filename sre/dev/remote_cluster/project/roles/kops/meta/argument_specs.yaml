---
argument_specs:
  main:
    short_description: Entry point for kOps cluster management tasks
    description:
      - This is a collection of validation tasks needed to manage the lifecyle of a kOps cluster.
    author:
      - Saurabh Jha
      - Gerard Vanloo
    options:
      kops_cluster:
        description: The configuration of the cluster
        required: true
        type: dict
      kops_stack:
        description: The configuration of the AWX stack
        required: false
        type: dict
      kops_full_cluster_name_override:
        description: The full name of the cluster to use
        required: false
        type: str
  validate_cluster:
    short_description: Entry point for kOps configuration validation tasks
    description:
      - This is a collection of validation tasks needed to run the various other tasks.
      - These tasks should be run as a pre-task in playbooks which invoke this role.
    author:
      - Gerard Vanloo
    options:
      kops_cluster:
        required: true
        type: dict
        options:
          aws:
            required: true
            type: dict
            options:
              region:
                required: true
                type: str
              zones:
                elements: str
                required: true
                type: list
          name_prefix:
            required: true
            type: str
          kubernetes_version:
            required: true
            type: str
          networking:
            required: true
            type: dict
            options:
              mode:
                required: true
                type: str
          nodes:
            required: true
            type: dict
            options:
              control:
                required: true
                type: dict
                options:
                  count:
                    required: true
                    type: int
                  instance_type:
                    required: true
                    type: str
              worker:
                required: true
                type: dict
                options:
                  count:
                    required: true
                    type: int
                  instance_type:
                    required: true
                    type: str
          ssh:
            required: true
            type: dict
            options:
              public_key_path:
                required: true
                type: str
          s3:
            required: true
            type: dict
            options:
              bucket_name:
                required: true
                type: str
  validate_stack:
    short_description: Entry point for kops configuration validation tasks
    description:
      - This is a collection of validation tasks needed to run the various other tasks.
      - These tasks include verfying the existence of the kOps cli and the S3 bucket where the kOps cluster states will be stored and validating the
        configuration used in the other tasks for managing the various clusters.
      - These tasks should be run as a pre-task in playbooks which invoke this role.
    author:
      - Gerard Vanloo
    options:
      kops_stack:
        required: true
        type: dict
        options:
          name_prefix:
            required: true
            type: str
          runners:
            required: true
            type: dict
            options:
              aws:
                required: true
                type: dict
                options:
                  subnet:
                    required: true
                    type: dict
                    options:
                      public_base:
                        required: true
                        type: str
                  vpc:
                    required: true
                    type: dict
                    options:
                      cidr:
                        required: true
                        type: str
              count:
                required: true
                type: int
